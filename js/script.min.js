"use strict";function dragElement(n,s,o,h,a,r){var l=0,d=0,c=0,u=0;function t(t){"inp-coordi"!==t.target.className&&"image-width"!==t.target.className&&"image-height"!==t.target.className&&"inp-section"!==t.target.className&&"btn btn_error"!==t.target.className&&"btn btn_linkCancel"!==t.target.className&&"btn btn_couponCancel"!==t.target.className&&"btn delete-image"!==t.target.className&&((t=t||window.event).preventDefault(),l=t.clientX,d=t.clientY,document.onmouseup=e,document.onmousemove=i)}function i(t){var i=window.innerWidth,e=window.innerHeight;(t=t||window.event).preventDefault(),c=l-t.clientX,u=d-t.clientY,l=t.clientX,d=t.clientY,null!==n?(n.style.left=100*l/i<10?"10%":90<100*l/i?"90%":100*l/i+"%",n.style.top=100*d/e<10?"10%":90<100*d/e?"90%":100*d/e+"%",o.style.width=100*l/i+"%",h.style.width=100*(i-l)/i+"%",a.style.height=100*d/e+"%",r.style.height=100*(e-d)/e+"%"):null!==s&&(s.style.left=100*(s.offsetLeft-c)/i+"%",s.style.top=100*(s.offsetTop-u)/e+"%")}function e(){document.onmouseup=null,document.onmousemove=null}null!==n?n.onmousedown=t:null!==s&&(s.onmousedown=t)}({init:function(){this.setElements(),this.bindEvents()},setElements:function(){this.textArea=document.getElementsByTagName("body")},bindEvents:function(){var t=this;this.textArea[0].addEventListener("click",function(){t.textAreaOnFunc()})},textAreaOnFunc:function(){console.log("body")}}).init(),dragElement(document.getElementById("btn-coordinate"),null,document.getElementById("left-side"),document.getElementById("right-side"),document.getElementById("left-side-top"),document.getElementById("left-side-bottom")),dragElement(null,document.getElementById("draggable"),null,null,null,null),function(e){({init:function(){this.setElements(),this.initLayout(),this.bindEvents()},setElements:function(){this.deviceArea=e(".device_area"),this.deleteImage=e(".delete-image"),this.btnLinkCancel=this.deviceArea.find(".btn_linkCancel"),this.btnCouponCancel=this.deviceArea.find(".btn_couponCancel"),this.btnError=this.deviceArea.find(".btn_error"),this.inputSectionNum=e("#section-num"),this.inputCoupon=e("#coupon"),this.inputLink=e("#link"),this.imgArea=e(".img_area"),this.imgSize=e(".image-size"),this.imgSizeWidth=this.imgSize.find(".image-width"),this.imgSizeHeight=this.imgSize.find(".image-height"),this.currentArea=this.imgArea.find(".current_area"),this.imgBox=this.imgArea.find(".img_box"),this.imgBoxCoupon=this.imgArea.find(".img_coupon"),this.imgBoxLink=this.imgArea.find(".img_link"),this.currentCoord=this.currentArea.find(".current_coord"),this.currentX=this.currentCoord.find(".pos_x"),this.currentY=this.currentCoord.find(".pos_y"),this.lineX=this.currentArea.find(".line_x"),this.lineY=this.currentArea.find(".line_y"),this.resultListCoupon=e(".result_lst_coupon"),this.resultListLink=e(".result_lst_link"),this.couponCnt=0,this.linkCnt=0,this.coordUnit="px"},initLayout:function(){this.currentArea.hide()},bindEvents:function(){this.imgArea.on("dragover dragenter dragleave drop",e.proxy(this.onDragEvents,this)),this.deleteImage.on("click",e.proxy(this.removeImage,this)),this.btnError.on("click",e.proxy(this.errorClickCancel,this)),this.btnLinkCancel.on("click",e.proxy(this.clickLinkCancel,this)),this.btnCouponCancel.on("click",e.proxy(this.clickCouponCancel,this))},onDragEvents:function(t){if("dragover"===t.type||"dragenter"==t.type)return this.imgArea.addClass("is_active"),!1;"dragleave"===t.type?this.imgArea.removeClass("is_active"):"drop"===t.type&&(""===this.inputSectionNum.val()?(t.preventDefault(),this.imgArea.removeClass("is_active"),alert("섹션번호를 입력해주세요")):(this.onDragleaveFunc(t),alert("오른쪽 영역 해당 섹션에 쿠폰개수와 링크개수가 입력되어있는지 확인해주세요 \n 영역 드래그 하시기 전에 그 부분을 입력해주셔야됩니다.")))},onDragleaveFunc:function(t){var i=new FileReader;this.file=t.originalEvent.dataTransfer.files[0],i.readAsDataURL(this.file),i.onload=e.proxy(this.createImage,this),t.preventDefault()},createImage:function(t){var i;this.file.type.match("image.*")?this.img||((i=new Image).src=t.target.result,this.img=this.imgBox.html(i).find("img"),this.img.on("load",e.proxy(this.onLoadImage,this))):alert("이미지 형식의 파일만 열어주세요.")},onLoadImage:function(){this.imgSizeWidth.val(this.img.width()+"px"),this.imgSizeHeight.val(this.img.height()+"px"),e("#secHeight"+this.inputSectionNum.val()).val(this.img.height()),this.imgArea.on("mousemove mouseenter mouseleave mousedown mouseup",e.proxy(this.coordEvents,this))},removeImage:function(){void 0!==this.img&&(this.imgArea.removeClass("is_active"),this.imgBoxLink.children(".drag_area").remove(),this.imgBoxCoupon.children(".drag_area").remove(),this.resultListCoupon.children().remove(),this.resultListLink.children().remove(),this.img.remove(),this.file=void 0,this.img=void 0,this.couponCnt=0,this.linkCnt=0,this.imgSizeWidth.val(null),this.imgSizeHeight.val(null),this.inputSectionNum.val(null),this.imgArea.off("mousemove mouseenter mouseleave mousedown mouseup"))},coordEvents:function(t){"mousemove"===t.type||"mouseenter"===t.type?this.showCurrentCoord(t):"mouseleave"===t.type?this.currentArea.hide():"mousedown"===t.type?this.initDragArea(t):"mouseup"===t.type&&this.drawSelectArea(t)},showCurrentCoord:function(t){this.imgOffsetX=this.img.offset().left.toFixed(0),this.imgOffsetY=this.img.offset().top.toFixed(0);var i=t.pageX-this.imgOffsetX,e=t.pageY-this.imgOffsetY;this.currentArea.show(),this.currentX.html(i+this.coordUnit),this.currentY.html(e+this.coordUnit),this.lineX.css("left",i),this.lineY.css("top",e)},initDragArea:function(t){var i;1===t.which&&(this.isDragged=!1,this.imgOffsetX=this.img.offset().left.toFixed(0),this.imgOffsetY=this.img.offset().top.toFixed(0),this.startX=t.pageX-this.imgOffsetX,this.startY=t.pageY-this.imgOffsetY,i=e('<div class="drag_area"></div>'),!0===this.inputCoupon.prop("checked")?(this.imgBoxCoupon.prepend(i),this.dragArea=this.imgBoxCoupon.children(".drag_area").first()):!0===this.inputLink.prop("checked")&&(this.imgBoxLink.prepend(i),this.dragArea=this.imgBoxLink.children(".drag_area").first()),this.imgArea.on("mousemove",e.proxy(this.drawDragging,this)))},drawDragging:function(t){this.isDragged=!0,this.imgOffsetX=this.img.offset().left.toFixed(0),this.imgOffsetY=this.img.offset().top.toFixed(0),this.dragX=t.pageX-this.imgOffsetX,this.dragY=t.pageY-this.imgOffsetY,this.selWidth=Math.abs(this.dragX-this.startX),this.selHeight=Math.abs(this.dragY-this.startY),this.endX=this.dragX<this.startX?this.startX-this.selWidth:this.startX,this.endY=this.dragY<this.startY?this.startY-this.selHeight:this.startY,this.dragArea.css({width:this.selWidth,height:this.selHeight,top:this.endY,left:this.endX})},drawSelectArea:function(t){var i;1===t.which&&(this.isDragged?!0===this.inputCoupon.prop("checked")?(i=++this.couponCnt,this.dragArea.css({background:"rgba(0,0,0,0.4)","line-height":this.selHeight+"px"}).html("쿠폰"+i),this.dragArea.attr("data-num",this.couponCnt),this.imgArea.off("mousemove",this.drawDragging),this.addCoordResult()):!0===this.inputLink.prop("checked")&&(this.dragArea.css({background:"rgba(0,0,0,0.4)","line-height":this.selHeight+"px"}).html("링크"+i),this.dragArea.attr("data-num",this.linkCnt),this.imgArea.off("mousemove",this.drawDragging),this.addCoordResult()):this.dragArea.remove())},clickCouponCancel:function(){for(var t=0;t<e(".drag_area").length;t++)void 0===e(".drag_area").eq(t).attr("data-num")&&e(".drag_area").eq(t).remove();this.dragArea&&this.couponCnt&&(this.imgBoxCoupon.find(".drag_area").eq(0).remove(),this.resultListCoupon.children("li").last().remove(),this.couponCnt--,this.couponCnt<0&&(this.couponCnt=0))},clickLinkCancel:function(){for(var t=0;t<e(".drag_area").length;t++)void 0===e(".drag_area").eq(t).attr("data-num")&&e(".drag_area").eq(t).remove();this.dragArea&&this.linkCnt&&(this.imgBoxLink.find(".drag_area").eq(0).remove(),this.resultListLink.children("li").last().remove(),this.linkCnt--,this.linkCnt<0&&(this.linkCnt=0))},errorClickCancel:function(){for(var t=0;t<e(".drag_area").length;t++)void 0===e(".drag_area").eq(t).attr("data-num")&&e(".drag_area").eq(t).remove()},addCoordResult:function(){var t;!0===this.inputCoupon.prop("checked")?(t='<li><span class="num">쿠폰'+this.couponCnt+'</span><input type="text" class="inp-coordi" data-num="'+this.selCnt+'" value="top:'+this.endY+this.coordUnit+";left:"+this.endX+this.coordUnit+";width:"+this.selWidth+this.coordUnit+";height:"+this.selHeight+this.coordUnit+';">',e("#couponTop_"+this.inputSectionNum.val()+"_"+this.couponCnt).val(this.endY),e("#couponLeft_"+this.inputSectionNum.val()+"_"+this.couponCnt).val(this.endX),e("#couponWidth_"+this.inputSectionNum.val()+"_"+this.couponCnt).val(this.selWidth),e("#couponHeight_"+this.inputSectionNum.val()+"_"+this.couponCnt).val(this.selHeight),this.resultListCoupon.append(t)):!0===this.inputLink.prop("checked")&&(t='<li><span class="num">링크'+this.linkCnt+'</span><input type="text" class="inp-coordi" data-num="'+this.selCnt+'" value="top:'+this.endY+this.coordUnit+";left:"+this.endX+this.coordUnit+";width:"+this.selWidth+this.coordUnit+";height:"+this.selHeight+this.coordUnit+';">',e("#lnkTop_"+this.inputSectionNum.val()+"_"+this.linkCnt).val(this.endY),e("#lnkLeft_"+this.inputSectionNum.val()+"_"+this.linkCnt).val(this.endX),e("#lnkWidth_"+this.inputSectionNum.val()+"_"+this.linkCnt).val(this.selWidth),e("#lnkHeight_"+this.inputSectionNum.val()+"_"+this.linkCnt).val(this.selHeight),this.resultListLink.append(t))}}).init()}((window,window.jQuery)),{init:function(){this.setElements(),this.bindEvents()},setElements:function(){this.textArea=document.getElementsByTagName("body")},bindEvents:function(){var t=this;this.textArea[0].addEventListener("click",function(){t.textAreaOnFunc()})},textAreaOnFunc:function(){console.log("body")}}.init();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdDIuanMiLCJzY3JpcHQxLmpzIiwic2NyaXB0My5qcyIsInNjcmlwdDQuanMiXSwibmFtZXMiOlsiZHJhZ0VsZW1lbnQiLCJlbG1udCIsImVsbW50MiIsImxlZnRTaWRlMSIsImxlZnRTaWRlMiIsInRvcFNpZGUxIiwidG9wU2lkZTIiLCJwb3MzIiwicG9zNCIsInBvczUiLCJwb3M2IiwiZHJhZ01vdXNlRG93biIsImUiLCJ0YXJnZXQiLCJjbGFzc05hbWUiLCJ3aW5kb3ciLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiY2xpZW50WCIsImNsaWVudFkiLCJkb2N1bWVudCIsIm9ubW91c2V1cCIsImNsb3NlRHJhZ0VsZW1lbnQiLCJvbm1vdXNlbW92ZSIsImVsZW1lbnREcmFnIiwid2luZG93V2lkdGgiLCJpbm5lcldpZHRoIiwid2luZG93SGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJzdHlsZSIsImxlZnQiLCJ0b3AiLCJ3aWR0aCIsImhlaWdodCIsIm9mZnNldExlZnQiLCJvZmZzZXRUb3AiLCJvbm1vdXNlZG93biIsImluaXQiLCJ0aGlzIiwic2V0RWxlbWVudHMiLCJiaW5kRXZlbnRzIiwidGV4dEFyZWEiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsIl90aGlzIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRleHRBcmVhT25GdW5jIiwiY29uc29sZSIsImxvZyIsImdldEVsZW1lbnRCeUlkIiwiJCIsImluaXRMYXlvdXQiLCJkZXZpY2VBcmVhIiwiZGVsZXRlSW1hZ2UiLCJidG5MaW5rQ2FuY2VsIiwiZmluZCIsImJ0bkNvdXBvbkNhbmNlbCIsImJ0bkVycm9yIiwiaW5wdXRTZWN0aW9uTnVtIiwiaW5wdXRDb3Vwb24iLCJpbnB1dExpbmsiLCJpbWdBcmVhIiwiaW1nU2l6ZSIsImltZ1NpemVXaWR0aCIsImltZ1NpemVIZWlnaHQiLCJjdXJyZW50QXJlYSIsImltZ0JveCIsImltZ0JveENvdXBvbiIsImltZ0JveExpbmsiLCJjdXJyZW50Q29vcmQiLCJjdXJyZW50WCIsImN1cnJlbnRZIiwibGluZVgiLCJsaW5lWSIsInJlc3VsdExpc3RDb3Vwb24iLCJyZXN1bHRMaXN0TGluayIsImNvdXBvbkNudCIsImxpbmtDbnQiLCJjb29yZFVuaXQiLCJoaWRlIiwib24iLCJwcm94eSIsIm9uRHJhZ0V2ZW50cyIsInJlbW92ZUltYWdlIiwiZXJyb3JDbGlja0NhbmNlbCIsImNsaWNrTGlua0NhbmNlbCIsImNsaWNrQ291cG9uQ2FuY2VsIiwidHlwZSIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJ2YWwiLCJhbGVydCIsIm9uRHJhZ2xlYXZlRnVuYyIsInJlYWRlciIsIkZpbGVSZWFkZXIiLCJmaWxlIiwib3JpZ2luYWxFdmVudCIsImRhdGFUcmFuc2ZlciIsImZpbGVzIiwicmVhZEFzRGF0YVVSTCIsIm9ubG9hZCIsImNyZWF0ZUltYWdlIiwibmV3SW1nIiwibWF0Y2giLCJpbWciLCJJbWFnZSIsInNyYyIsInJlc3VsdCIsImh0bWwiLCJvbkxvYWRJbWFnZSIsImNvb3JkRXZlbnRzIiwidW5kZWZpbmVkIiwiY2hpbGRyZW4iLCJyZW1vdmUiLCJvZmYiLCJzaG93Q3VycmVudENvb3JkIiwiaW5pdERyYWdBcmVhIiwiZHJhd1NlbGVjdEFyZWEiLCJpbWdPZmZzZXRYIiwib2Zmc2V0IiwidG9GaXhlZCIsImltZ09mZnNldFkiLCJwYWdlWCIsInBhZ2VZIiwic2hvdyIsImNzcyIsImRyYWdBcmVhIiwid2hpY2giLCJpc0RyYWdnZWQiLCJzdGFydFgiLCJzdGFydFkiLCJwcm9wIiwicHJlcGVuZCIsImZpcnN0IiwiZHJhd0RyYWdnaW5nIiwiZHJhZ1giLCJkcmFnWSIsInNlbFdpZHRoIiwiTWF0aCIsImFicyIsInNlbEhlaWdodCIsImVuZFgiLCJlbmRZIiwiaSIsImJhY2tncm91bmQiLCJsaW5lLWhlaWdodCIsImF0dHIiLCJhZGRDb29yZFJlc3VsdCIsImxlbmd0aCIsImVxIiwibGFzdCIsInJlc3VsdFN0ciIsInNlbENudCIsImFwcGVuZCIsImpRdWVyeSIsIl90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QXNDLFNBQUFhLElBQUFuRCxLQUFBa0csVUFDQXZGLEVBQUEsY0FBQVgsS0FBQW1CLGdCQUFBZ0MsTUFBQSxJQUFBbkQsS0FBQXNDLFNBQUFhLElBQUFuRCxLQUFBcUcsV0FDQXJHLEtBQUFvQyxlQUFBOEUsT0FBQUYsT0FJQWpILE9BalFBLEVBa1FBdEIsT0FBQUEsT0FBQTBJLFNDaFFBLENBQ0FwSCxLQUFBLFdBQ0FDLEtBQUFDLGNBQ0FELEtBQUFFLGNBRUFELFlBQUEsV0FDQUQsS0FBQUcsU0FBQXJCLFNBQUFzQixxQkFBQSxTQUVBRixXQUFBLFdBQUEsSUFBQWtILEVBQUFwSCxLQUNBQSxLQUFBRyxTQUFBLEdBQUFHLGlCQUFBLFFBQUEsV0FDQThHLEVBQUE3RyxvQkFHQUEsZUFBQSxXQUNBQyxRQUFBQyxJQUFBLFVBSUFWIiwiZmlsZSI6InNjcmlwdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJkcmFnRWxlbWVudChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJ0bi1jb29yZGluYXRlXCIpLCBudWxsLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxlZnQtc2lkZVwiKSwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyaWdodC1zaWRlXCIpLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxlZnQtc2lkZS10b3BcIiksIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGVmdC1zaWRlLWJvdHRvbVwiKSk7XHJcbmRyYWdFbGVtZW50KG51bGwsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZHJhZ2dhYmxlXCIpLCBudWxsLCBudWxsLCBudWxsLCBudWxsKTtcclxuXHJcbmZ1bmN0aW9uIGRyYWdFbGVtZW50KGVsbW50LCBlbG1udDIsIGxlZnRTaWRlMSwgbGVmdFNpZGUyLCB0b3BTaWRlMSwgdG9wU2lkZTIpIHtcclxuICAgIHZhciBwb3MzID0gMCwgcG9zNCA9IDAsIHBvczUgPSAwLCBwb3M2ID0gMDtcclxuICAgIGlmIChlbG1udCAhPT0gbnVsbCkge1xyXG4gICAgICAgIGVsbW50Lm9ubW91c2Vkb3duID0gZHJhZ01vdXNlRG93bjtcclxuICAgIH0gZWxzZSBpZiAoZWxtbnQyICE9PSBudWxsKSB7XHJcbiAgICAgICAgZWxtbnQyLm9ubW91c2Vkb3duID0gZHJhZ01vdXNlRG93bjtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBkcmFnTW91c2VEb3duKGUpIHtcclxuICAgICAgICBpZiAoZS50YXJnZXQuY2xhc3NOYW1lICE9PSAnaW5wLWNvb3JkaScgJiYgZS50YXJnZXQuY2xhc3NOYW1lICE9PSAnaW1hZ2Utd2lkdGgnICYmIGUudGFyZ2V0LmNsYXNzTmFtZSAhPT0gJ2ltYWdlLWhlaWdodCcgJiYgZS50YXJnZXQuY2xhc3NOYW1lICE9PSAnaW5wLXNlY3Rpb24nICYmIGUudGFyZ2V0LmNsYXNzTmFtZSAhPT0gJ2J0biBidG5fZXJyb3InICYmIGUudGFyZ2V0LmNsYXNzTmFtZSAhPT0gJ2J0biBidG5fbGlua0NhbmNlbCcgJiYgZS50YXJnZXQuY2xhc3NOYW1lICE9PSAnYnRuIGJ0bl9jb3Vwb25DYW5jZWwnICYmIGUudGFyZ2V0LmNsYXNzTmFtZSAhPT0gJ2J0biBkZWxldGUtaW1hZ2UnKSB7XHJcbiAgICAgICAgICAgIGUgPSBlIHx8IHdpbmRvdy5ldmVudDtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgcG9zMyA9IGUuY2xpZW50WDtcclxuICAgICAgICAgICAgcG9zNCA9IGUuY2xpZW50WTtcclxuXHJcbiAgICAgICAgICAgIGRvY3VtZW50Lm9ubW91c2V1cCA9IGNsb3NlRHJhZ0VsZW1lbnQ7XHJcbiAgICAgICAgICAgIGRvY3VtZW50Lm9ubW91c2Vtb3ZlID0gZWxlbWVudERyYWc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGVsZW1lbnREcmFnKGUpIHtcclxuICAgICAgICB2YXIgd2luZG93V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aCxcclxuICAgICAgICAgICAgd2luZG93SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG4gICAgICAgIGUgPSBlIHx8IHdpbmRvdy5ldmVudDtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgIHBvczUgPSBwb3MzIC0gZS5jbGllbnRYO1xyXG4gICAgICAgIHBvczYgPSBwb3M0IC0gZS5jbGllbnRZO1xyXG4gICAgICAgIHBvczMgPSBlLmNsaWVudFg7XHJcbiAgICAgICAgcG9zNCA9IGUuY2xpZW50WTtcclxuXHJcbiAgICAgICAgaWYgKGVsbW50ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGVsbW50LnN0eWxlLmxlZnQgPSBwb3MzICogMTAwIC8gd2luZG93V2lkdGggPCAxMCA/IDEwICsgXCIlXCIgOiBwb3MzICogMTAwIC8gd2luZG93V2lkdGggPiA5MCA/IDkwICsgXCIlXCIgOiBwb3MzICogMTAwIC8gd2luZG93V2lkdGggKyBcIiVcIjtcclxuICAgICAgICAgICAgZWxtbnQuc3R5bGUudG9wID0gcG9zNCAqIDEwMCAvIHdpbmRvd0hlaWdodCA8IDEwID8gMTAgKyBcIiVcIiA6IHBvczQgKiAxMDAgLyB3aW5kb3dIZWlnaHQgPiA5MCA/IDkwICsgXCIlXCIgOiBwb3M0ICogMTAwIC8gd2luZG93SGVpZ2h0ICsgXCIlXCI7XHJcbiAgICAgICAgICAgIGxlZnRTaWRlMS5zdHlsZS53aWR0aCA9IHBvczMgKiAxMDAgLyB3aW5kb3dXaWR0aCArIFwiJVwiO1xyXG4gICAgICAgICAgICBsZWZ0U2lkZTIuc3R5bGUud2lkdGggPSAod2luZG93V2lkdGggLSBwb3MzKSAqIDEwMCAvIHdpbmRvd1dpZHRoICsgXCIlXCI7XHJcbiAgICAgICAgICAgIHRvcFNpZGUxLnN0eWxlLmhlaWdodCA9IHBvczQgKiAxMDAgLyB3aW5kb3dIZWlnaHQgKyBcIiVcIjtcclxuICAgICAgICAgICAgdG9wU2lkZTIuc3R5bGUuaGVpZ2h0ID0gKHdpbmRvd0hlaWdodCAtIHBvczQpICogMTAwIC8gd2luZG93SGVpZ2h0ICsgXCIlXCI7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlbG1udDIgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgZWxtbnQyLnN0eWxlLmxlZnQgPSAoZWxtbnQyLm9mZnNldExlZnQgLSBwb3M1KSAqIDEwMCAvIHdpbmRvd1dpZHRoICsgXCIlXCI7XHJcbiAgICAgICAgICAgIGVsbW50Mi5zdHlsZS50b3AgPSAoZWxtbnQyLm9mZnNldFRvcCAtIHBvczYpICogMTAwIC8gd2luZG93SGVpZ2h0ICsgXCIlXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNsb3NlRHJhZ0VsZW1lbnQoKSB7XHJcbiAgICAgICAgZG9jdW1lbnQub25tb3VzZXVwID0gbnVsbDtcclxuICAgICAgICBkb2N1bWVudC5vbm1vdXNlbW92ZSA9IG51bGw7XHJcbiAgICB9XHJcbn0iLCIoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgdmFyIGNvb3JkR2VuZXJhdG9yID0ge1xyXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRFbGVtZW50cygpO1xyXG4gICAgICAgICAgICB0aGlzLmJpbmRFdmVudHMoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldEVsZW1lbnRzOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGV4dEFyZWEgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYm9keScpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYmluZEV2ZW50czogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aGlzLnRleHRBcmVhWzBdLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0QXJlYU9uRnVuYygpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdGV4dEFyZWFPbkZ1bmMgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdib2R5Jyk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCQodGhpcykpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBjb29yZEdlbmVyYXRvci5pbml0KCk7XHJcbn0pKCk7XHJcblxyXG4vLyAoZnVuY3Rpb24gKHdpbiwgJCkge1xyXG4vLyAgICAgJ3VzZSBzdHJpY3QnO1xyXG4vLyAgICAgdmFyIGNvb3JkR2VuZXJhdG9yID0ge1xyXG4vLyAgICAgICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuLy8gICAgICAgICAgICAgdGhpcy5zZXRFbGVtZW50cygpO1xyXG4vLyAgICAgICAgICAgICB0aGlzLmJpbmRFdmVudHMoKTtcclxuLy8gICAgICAgICB9LFxyXG4vLyAgICAgICAgIHNldEVsZW1lbnRzOiBmdW5jdGlvbiAoKSB7XHJcbi8vICAgICAgICAgICAgIHRoaXMudGV4dEFyZWEgPSAkKCd0ZXh0YXJlYScpO1xyXG4vLyAgICAgICAgIH0sXHJcbi8vICAgICAgICAgYmluZEV2ZW50czogZnVuY3Rpb24gKCkge1xyXG4vLyAgICAgICAgICAgICB0aGlzLnRleHRBcmVhLm9uKCdmb2N1cycsJC5wcm94eSh0aGlzLnRleHRBcmVhT25GdW5jLCB0aGlzKSlcclxuLy8gICAgICAgICB9LFxyXG4vLyAgICAgICAgIHRleHRBcmVhT25GdW5jIDogZnVuY3Rpb24gKCkge1xyXG4vLyAgICAgICAgICAgICBjb25zb2xlLmxvZygndGVzdCcpO1xyXG4vLyAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygkKHRoaXMpKTtcclxuLy8gICAgICAgICB9XHJcbi8vICAgICB9O1xyXG4vLyAgICAgY29vcmRHZW5lcmF0b3IuaW5pdCgpO1xyXG4vLyB9KSh3aW5kb3csIHdpbmRvdy5qUXVlcnkpOyIsIihmdW5jdGlvbiAod2luLCAkKSB7XHJcbiAgICB2YXIgY29vcmRHZW5lcmF0b3IgPSB7XHJcbiAgICAgICAgaW5pdDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aGlzLnNldEVsZW1lbnRzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdExheW91dCgpO1xyXG4gICAgICAgICAgICB0aGlzLmJpbmRFdmVudHMoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldEVsZW1lbnRzOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGV2aWNlQXJlYSA9ICQoJy5kZXZpY2VfYXJlYScpO1xyXG4gICAgICAgICAgICB0aGlzLmRlbGV0ZUltYWdlID0gJCgnLmRlbGV0ZS1pbWFnZScpO1xyXG4gICAgICAgICAgICB0aGlzLmJ0bkxpbmtDYW5jZWwgPSB0aGlzLmRldmljZUFyZWEuZmluZCgnLmJ0bl9saW5rQ2FuY2VsJyk7XHJcbiAgICAgICAgICAgIHRoaXMuYnRuQ291cG9uQ2FuY2VsID0gdGhpcy5kZXZpY2VBcmVhLmZpbmQoJy5idG5fY291cG9uQ2FuY2VsJyk7XHJcbiAgICAgICAgICAgIHRoaXMuYnRuRXJyb3IgPSB0aGlzLmRldmljZUFyZWEuZmluZCgnLmJ0bl9lcnJvcicpO1xyXG4gICAgICAgICAgICB0aGlzLmlucHV0U2VjdGlvbk51bSA9ICQoJyNzZWN0aW9uLW51bScpO1xyXG4gICAgICAgICAgICB0aGlzLmlucHV0Q291cG9uID0gJCgnI2NvdXBvbicpO1xyXG4gICAgICAgICAgICB0aGlzLmlucHV0TGluayA9ICQoJyNsaW5rJyk7XHJcbiAgICAgICAgICAgIHRoaXMuaW1nQXJlYSA9ICQoJy5pbWdfYXJlYScpO1xyXG4gICAgICAgICAgICB0aGlzLmltZ1NpemUgPSAkKCcuaW1hZ2Utc2l6ZScpO1xyXG4gICAgICAgICAgICB0aGlzLmltZ1NpemVXaWR0aCA9IHRoaXMuaW1nU2l6ZS5maW5kKCcuaW1hZ2Utd2lkdGgnKTtcclxuICAgICAgICAgICAgdGhpcy5pbWdTaXplSGVpZ2h0ID0gdGhpcy5pbWdTaXplLmZpbmQoJy5pbWFnZS1oZWlnaHQnKTtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50QXJlYSA9IHRoaXMuaW1nQXJlYS5maW5kKCcuY3VycmVudF9hcmVhJyk7XHJcbiAgICAgICAgICAgIHRoaXMuaW1nQm94ID0gdGhpcy5pbWdBcmVhLmZpbmQoJy5pbWdfYm94Jyk7XHJcbiAgICAgICAgICAgIHRoaXMuaW1nQm94Q291cG9uID0gdGhpcy5pbWdBcmVhLmZpbmQoJy5pbWdfY291cG9uJyk7XHJcbiAgICAgICAgICAgIHRoaXMuaW1nQm94TGluayA9IHRoaXMuaW1nQXJlYS5maW5kKCcuaW1nX2xpbmsnKTtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50Q29vcmQgPSB0aGlzLmN1cnJlbnRBcmVhLmZpbmQoJy5jdXJyZW50X2Nvb3JkJyk7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFggPSB0aGlzLmN1cnJlbnRDb29yZC5maW5kKCcucG9zX3gnKTtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50WSA9IHRoaXMuY3VycmVudENvb3JkLmZpbmQoJy5wb3NfeScpO1xyXG4gICAgICAgICAgICB0aGlzLmxpbmVYID0gdGhpcy5jdXJyZW50QXJlYS5maW5kKCcubGluZV94Jyk7XHJcbiAgICAgICAgICAgIHRoaXMubGluZVkgPSB0aGlzLmN1cnJlbnRBcmVhLmZpbmQoJy5saW5lX3knKTtcclxuICAgICAgICAgICAgdGhpcy5yZXN1bHRMaXN0Q291cG9uID0gJCgnLnJlc3VsdF9sc3RfY291cG9uJyk7XHJcbiAgICAgICAgICAgIHRoaXMucmVzdWx0TGlzdExpbmsgPSAkKCcucmVzdWx0X2xzdF9saW5rJyk7XHJcbiAgICAgICAgICAgIHRoaXMuY291cG9uQ250ID0gMDtcclxuICAgICAgICAgICAgdGhpcy5saW5rQ250ID0gMDtcclxuICAgICAgICAgICAgdGhpcy5jb29yZFVuaXQgPSAncHgnO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaW5pdExheW91dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRBcmVhLmhpZGUoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGJpbmRFdmVudHM6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy5pbWdBcmVhLm9uKCdkcmFnb3ZlciBkcmFnZW50ZXIgZHJhZ2xlYXZlIGRyb3AnLCAkLnByb3h5KHRoaXMub25EcmFnRXZlbnRzLCB0aGlzKSk7XHJcbiAgICAgICAgICAgIHRoaXMuZGVsZXRlSW1hZ2Uub24oJ2NsaWNrJywgJC5wcm94eSh0aGlzLnJlbW92ZUltYWdlLCB0aGlzKSk7XHJcbiAgICAgICAgICAgIHRoaXMuYnRuRXJyb3Iub24oJ2NsaWNrJywgJC5wcm94eSh0aGlzLmVycm9yQ2xpY2tDYW5jZWwsIHRoaXMpKTtcclxuICAgICAgICAgICAgdGhpcy5idG5MaW5rQ2FuY2VsLm9uKCdjbGljaycsICQucHJveHkodGhpcy5jbGlja0xpbmtDYW5jZWwsIHRoaXMpKTtcclxuICAgICAgICAgICAgdGhpcy5idG5Db3Vwb25DYW5jZWwub24oJ2NsaWNrJywgJC5wcm94eSh0aGlzLmNsaWNrQ291cG9uQ2FuY2VsLCB0aGlzKSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBvbkRyYWdFdmVudHM6IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGlmIChlLnR5cGUgPT09ICdkcmFnb3ZlcicgfHwgZS50eXBlID09ICdkcmFnZW50ZXInKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmltZ0FyZWEuYWRkQ2xhc3MoJ2lzX2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUudHlwZSA9PT0gJ2RyYWdsZWF2ZScpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW1nQXJlYS5yZW1vdmVDbGFzcygnaXNfYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS50eXBlID09PSAnZHJvcCcpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlucHV0U2VjdGlvbk51bS52YWwoKSA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWdBcmVhLnJlbW92ZUNsYXNzKCdpc19hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICBhbGVydCgn7IS57IWY67KI7Zi466W8IOyeheugpe2VtOyjvOyEuOyalCcpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRHJhZ2xlYXZlRnVuYyhlKTtcclxuICAgICAgICAgICAgICAgICAgICBhbGVydCgn7Jik66W47Kq9IOyYgeyXrSDtlbTri7kg7IS57IWY7JeQIOy/oO2PsOqwnOyImOyZgCDrp4HtgazqsJzsiJjqsIAg7J6F66Cl65CY7Ja07J6I64qU7KeAIO2ZleyduO2VtOyjvOyEuOyalCBcXG4g7JiB7JetIOuTnOuemOq3uCDtlZjsi5zquLAg7KCE7JeQIOq3uCDrtoDrtoTsnYQg7J6F66Cl7ZW07KO87IWU7JW865Cp64uI64ukLicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBvbkRyYWdsZWF2ZUZ1bmM6IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG4gICAgICAgICAgICB0aGlzLmZpbGUgPSBlLm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyLmZpbGVzWzBdO1xyXG4gICAgICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTCh0aGlzLmZpbGUpO1xyXG4gICAgICAgICAgICByZWFkZXIub25sb2FkID0gJC5wcm94eSh0aGlzLmNyZWF0ZUltYWdlLCB0aGlzKTtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY3JlYXRlSW1hZ2U6IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5maWxlLnR5cGUubWF0Y2goJ2ltYWdlLionKSkge1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoJ+ydtOuvuOyngCDtmJXsi53snZgg7YyM7J2866eMIOyXtOyWtOyjvOyEuOyalC4nKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pbWcpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3SW1nID0gbmV3IEltYWdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3SW1nLnNyYyA9IGUudGFyZ2V0LnJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmltZyA9IHRoaXMuaW1nQm94Lmh0bWwobmV3SW1nKS5maW5kKCdpbWcnKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmltZy5vbignbG9hZCcsICQucHJveHkodGhpcy5vbkxvYWRJbWFnZSwgdGhpcykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBvbkxvYWRJbWFnZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aGlzLmltZ1NpemVXaWR0aC52YWwodGhpcy5pbWcud2lkdGgoKSArIFwicHhcIik7XHJcbiAgICAgICAgICAgIHRoaXMuaW1nU2l6ZUhlaWdodC52YWwodGhpcy5pbWcuaGVpZ2h0KCkgKyBcInB4XCIpO1xyXG4gICAgICAgICAgICAkKCcjc2VjSGVpZ2h0JyArIHRoaXMuaW5wdXRTZWN0aW9uTnVtLnZhbCgpKS52YWwodGhpcy5pbWcuaGVpZ2h0KCkpO1xyXG4gICAgICAgICAgICB0aGlzLmltZ0FyZWEub24oJ21vdXNlbW92ZSBtb3VzZWVudGVyIG1vdXNlbGVhdmUgbW91c2Vkb3duIG1vdXNldXAnLCAkLnByb3h5KHRoaXMuY29vcmRFdmVudHMsIHRoaXMpKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlbW92ZUltYWdlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmltZyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmltZ0FyZWEucmVtb3ZlQ2xhc3MoJ2lzX2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbWdCb3hMaW5rLmNoaWxkcmVuKCcuZHJhZ19hcmVhJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmltZ0JveENvdXBvbi5jaGlsZHJlbignLmRyYWdfYXJlYScpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRMaXN0Q291cG9uLmNoaWxkcmVuKCkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc3VsdExpc3RMaW5rLmNoaWxkcmVuKCkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmltZy5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmlsZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW1nID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb3Vwb25DbnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5saW5rQ250ID0gMDtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW1nU2l6ZVdpZHRoLnZhbChudWxsKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW1nU2l6ZUhlaWdodC52YWwobnVsbCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlucHV0U2VjdGlvbk51bS52YWwobnVsbCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmltZ0FyZWEub2ZmKCdtb3VzZW1vdmUgbW91c2VlbnRlciBtb3VzZWxlYXZlIG1vdXNlZG93biBtb3VzZXVwJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvb3JkRXZlbnRzOiBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBpZiAoZS50eXBlID09PSAnbW91c2Vtb3ZlJyB8fCBlLnR5cGUgPT09ICdtb3VzZWVudGVyJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93Q3VycmVudENvb3JkKGUpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUudHlwZSA9PT0gJ21vdXNlbGVhdmUnKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRBcmVhLmhpZGUoKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChlLnR5cGUgPT09ICdtb3VzZWRvd24nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluaXREcmFnQXJlYShlKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChlLnR5cGUgPT09ICdtb3VzZXVwJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3U2VsZWN0QXJlYShlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2hvd0N1cnJlbnRDb29yZDogZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgdGhpcy5pbWdPZmZzZXRYID0gdGhpcy5pbWcub2Zmc2V0KCkubGVmdC50b0ZpeGVkKDApO1xyXG4gICAgICAgICAgICB0aGlzLmltZ09mZnNldFkgPSB0aGlzLmltZy5vZmZzZXQoKS50b3AudG9GaXhlZCgwKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBwYWdlWCA9IGUucGFnZVggLSB0aGlzLmltZ09mZnNldFgsXHJcbiAgICAgICAgICAgICAgICBwYWdlWSA9IGUucGFnZVkgLSB0aGlzLmltZ09mZnNldFk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRBcmVhLnNob3coKTtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50WC5odG1sKHBhZ2VYICsgdGhpcy5jb29yZFVuaXQpO1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRZLmh0bWwocGFnZVkgKyB0aGlzLmNvb3JkVW5pdCk7XHJcbiAgICAgICAgICAgIHRoaXMubGluZVguY3NzKCdsZWZ0JywgcGFnZVgpO1xyXG4gICAgICAgICAgICB0aGlzLmxpbmVZLmNzcygndG9wJywgcGFnZVkpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaW5pdERyYWdBcmVhOiBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBpZiAoZS53aGljaCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pc0RyYWdnZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW1nT2Zmc2V0WCA9IHRoaXMuaW1nLm9mZnNldCgpLmxlZnQudG9GaXhlZCgwKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW1nT2Zmc2V0WSA9IHRoaXMuaW1nLm9mZnNldCgpLnRvcC50b0ZpeGVkKDApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydFggPSBlLnBhZ2VYIC0gdGhpcy5pbWdPZmZzZXRYO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydFkgPSBlLnBhZ2VZIC0gdGhpcy5pbWdPZmZzZXRZO1xyXG4gICAgICAgICAgICAgICAgdmFyIGRyYWdBcmVhID0gJCgnPGRpdiBjbGFzcz1cImRyYWdfYXJlYVwiPjwvZGl2PicpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5wdXRDb3Vwb24ucHJvcCgnY2hlY2tlZCcpID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWdCb3hDb3Vwb24ucHJlcGVuZChkcmFnQXJlYSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmFnQXJlYSA9IHRoaXMuaW1nQm94Q291cG9uLmNoaWxkcmVuKCcuZHJhZ19hcmVhJykuZmlyc3QoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5pbnB1dExpbmsucHJvcCgnY2hlY2tlZCcpID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWdCb3hMaW5rLnByZXBlbmQoZHJhZ0FyZWEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhZ0FyZWEgPSB0aGlzLmltZ0JveExpbmsuY2hpbGRyZW4oJy5kcmFnX2FyZWEnKS5maXJzdCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbWdBcmVhLm9uKCdtb3VzZW1vdmUnLCAkLnByb3h5KHRoaXMuZHJhd0RyYWdnaW5nLCB0aGlzKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGRyYXdEcmFnZ2luZzogZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgdGhpcy5pc0RyYWdnZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLmltZ09mZnNldFggPSB0aGlzLmltZy5vZmZzZXQoKS5sZWZ0LnRvRml4ZWQoMCk7XHJcbiAgICAgICAgICAgIHRoaXMuaW1nT2Zmc2V0WSA9IHRoaXMuaW1nLm9mZnNldCgpLnRvcC50b0ZpeGVkKDApO1xyXG4gICAgICAgICAgICB0aGlzLmRyYWdYID0gZS5wYWdlWCAtIHRoaXMuaW1nT2Zmc2V0WDtcclxuICAgICAgICAgICAgdGhpcy5kcmFnWSA9IGUucGFnZVkgLSB0aGlzLmltZ09mZnNldFk7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsV2lkdGggPSBNYXRoLmFicyh0aGlzLmRyYWdYIC0gdGhpcy5zdGFydFgpO1xyXG4gICAgICAgICAgICB0aGlzLnNlbEhlaWdodCA9IE1hdGguYWJzKHRoaXMuZHJhZ1kgLSB0aGlzLnN0YXJ0WSk7XHJcbiAgICAgICAgICAgIHRoaXMuZW5kWCA9ICh0aGlzLmRyYWdYIDwgdGhpcy5zdGFydFgpID8gKHRoaXMuc3RhcnRYIC0gdGhpcy5zZWxXaWR0aCkgOiB0aGlzLnN0YXJ0WDtcclxuICAgICAgICAgICAgdGhpcy5lbmRZID0gKHRoaXMuZHJhZ1kgPCB0aGlzLnN0YXJ0WSkgPyAodGhpcy5zdGFydFkgLSB0aGlzLnNlbEhlaWdodCkgOiB0aGlzLnN0YXJ0WTtcclxuICAgICAgICAgICAgdGhpcy5kcmFnQXJlYS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgJ3dpZHRoJzogdGhpcy5zZWxXaWR0aCxcclxuICAgICAgICAgICAgICAgICdoZWlnaHQnOiB0aGlzLnNlbEhlaWdodCxcclxuICAgICAgICAgICAgICAgICd0b3AnOiB0aGlzLmVuZFksXHJcbiAgICAgICAgICAgICAgICAnbGVmdCc6IHRoaXMuZW5kWFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRyYXdTZWxlY3RBcmVhOiBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBpZiAoZS53aGljaCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzRHJhZ2dlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhZ0FyZWEucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlucHV0Q291cG9uLnByb3AoJ2NoZWNrZWQnKSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9ICsrdGhpcy5jb3Vwb25DbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhZ0FyZWEuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kJzogJ3JnYmEoMCwwLDAsMC40KScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbGluZS1oZWlnaHQnOiB0aGlzLnNlbEhlaWdodCArICdweCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSkuaHRtbCgn7L+g7Y+wJyArIGkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYWdBcmVhLmF0dHIoJ2RhdGEtbnVtJywgdGhpcy5jb3Vwb25DbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmltZ0FyZWEub2ZmKCdtb3VzZW1vdmUnLCB0aGlzLmRyYXdEcmFnZ2luZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkQ29vcmRSZXN1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaW5wdXRMaW5rLnByb3AoJ2NoZWNrZWQnKSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB2YXIgaSA9ICsrdGhpcy5saW5rQ250O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYWdBcmVhLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYmFja2dyb3VuZCc6ICdyZ2JhKDAsMCwwLDAuNCknLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2xpbmUtaGVpZ2h0JzogdGhpcy5zZWxIZWlnaHQgKyAncHgnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmh0bWwoJ+unge2BrCcgKyBpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmFnQXJlYS5hdHRyKCdkYXRhLW51bScsIHRoaXMubGlua0NudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW1nQXJlYS5vZmYoJ21vdXNlbW92ZScsIHRoaXMuZHJhd0RyYWdnaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRDb29yZFJlc3VsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2xpY2tDb3Vwb25DYW5jZWw6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkKCcuZHJhZ19hcmVhJykubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmICgkKCcuZHJhZ19hcmVhJykuZXEoaSkuYXR0cignZGF0YS1udW0nKSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmRyYWdfYXJlYScpLmVxKGkpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRyYWdBcmVhICYmIHRoaXMuY291cG9uQ250KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmltZ0JveENvdXBvbi5maW5kKCcuZHJhZ19hcmVhJykuZXEoMCkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc3VsdExpc3RDb3Vwb24uY2hpbGRyZW4oJ2xpJykubGFzdCgpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb3Vwb25DbnQtLTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvdXBvbkNudCA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvdXBvbkNudCA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGNsaWNrTGlua0NhbmNlbDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICQoJy5kcmFnX2FyZWEnKS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCQoJy5kcmFnX2FyZWEnKS5lcShpKS5hdHRyKCdkYXRhLW51bScpID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuZHJhZ19hcmVhJykuZXEoaSkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuZHJhZ0FyZWEgJiYgdGhpcy5saW5rQ250KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmltZ0JveExpbmsuZmluZCgnLmRyYWdfYXJlYScpLmVxKDApLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRMaXN0TGluay5jaGlsZHJlbignbGknKS5sYXN0KCkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpbmtDbnQtLTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmxpbmtDbnQgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5saW5rQ250ID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZXJyb3JDbGlja0NhbmNlbDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICQoJy5kcmFnX2FyZWEnKS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCQoJy5kcmFnX2FyZWEnKS5lcShpKS5hdHRyKCdkYXRhLW51bScpID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuZHJhZ19hcmVhJykuZXEoaSkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGFkZENvb3JkUmVzdWx0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHRTdHI7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlucHV0Q291cG9uLnByb3AoJ2NoZWNrZWQnKSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0U3RyID0gJzxsaT48c3BhbiBjbGFzcz1cIm51bVwiPuy/oO2PsCcgKyB0aGlzLmNvdXBvbkNudCArICc8L3NwYW4+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiaW5wLWNvb3JkaVwiIGRhdGEtbnVtPVwiJyArIHRoaXMuc2VsQ250ICsgJ1wiIHZhbHVlPVwiJyArXHJcbiAgICAgICAgICAgICAgICAgICAgJ3RvcDonICsgdGhpcy5lbmRZICsgdGhpcy5jb29yZFVuaXQgKyAnOycgK1xyXG4gICAgICAgICAgICAgICAgICAgICdsZWZ0OicgKyB0aGlzLmVuZFggKyB0aGlzLmNvb3JkVW5pdCArICc7JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJ3dpZHRoOicgKyB0aGlzLnNlbFdpZHRoICsgdGhpcy5jb29yZFVuaXQgKyAnOycgK1xyXG4gICAgICAgICAgICAgICAgICAgICdoZWlnaHQ6JyArIHRoaXMuc2VsSGVpZ2h0ICsgdGhpcy5jb29yZFVuaXQgKyAnO1wiPic7XHJcbiAgICAgICAgICAgICAgICAkKCcjY291cG9uVG9wXycgKyB0aGlzLmlucHV0U2VjdGlvbk51bS52YWwoKSArICdfJyArIHRoaXMuY291cG9uQ250KS52YWwodGhpcy5lbmRZKTtcclxuICAgICAgICAgICAgICAgICQoJyNjb3Vwb25MZWZ0XycgKyB0aGlzLmlucHV0U2VjdGlvbk51bS52YWwoKSArICdfJyArIHRoaXMuY291cG9uQ250KS52YWwodGhpcy5lbmRYKTtcclxuICAgICAgICAgICAgICAgICQoJyNjb3Vwb25XaWR0aF8nICsgdGhpcy5pbnB1dFNlY3Rpb25OdW0udmFsKCkgKyAnXycgKyB0aGlzLmNvdXBvbkNudCkudmFsKHRoaXMuc2VsV2lkdGgpO1xyXG4gICAgICAgICAgICAgICAgJCgnI2NvdXBvbkhlaWdodF8nICsgdGhpcy5pbnB1dFNlY3Rpb25OdW0udmFsKCkgKyAnXycgKyB0aGlzLmNvdXBvbkNudCkudmFsKHRoaXMuc2VsSGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0TGlzdENvdXBvbi5hcHBlbmQocmVzdWx0U3RyKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlucHV0TGluay5wcm9wKCdjaGVja2VkJykgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdFN0ciA9ICc8bGk+PHNwYW4gY2xhc3M9XCJudW1cIj7rp4HtgawnICsgdGhpcy5saW5rQ250ICsgJzwvc3Bhbj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJpbnAtY29vcmRpXCIgZGF0YS1udW09XCInICsgdGhpcy5zZWxDbnQgKyAnXCIgdmFsdWU9XCInICtcclxuICAgICAgICAgICAgICAgICAgICAndG9wOicgKyB0aGlzLmVuZFkgKyB0aGlzLmNvb3JkVW5pdCArICc7JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJ2xlZnQ6JyArIHRoaXMuZW5kWCArIHRoaXMuY29vcmRVbml0ICsgJzsnICtcclxuICAgICAgICAgICAgICAgICAgICAnd2lkdGg6JyArIHRoaXMuc2VsV2lkdGggKyB0aGlzLmNvb3JkVW5pdCArICc7JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJ2hlaWdodDonICsgdGhpcy5zZWxIZWlnaHQgKyB0aGlzLmNvb3JkVW5pdCArICc7XCI+JztcclxuICAgICAgICAgICAgICAgICQoJyNsbmtUb3BfJyArIHRoaXMuaW5wdXRTZWN0aW9uTnVtLnZhbCgpICsgJ18nICsgdGhpcy5saW5rQ250KS52YWwodGhpcy5lbmRZKTtcclxuICAgICAgICAgICAgICAgICQoJyNsbmtMZWZ0XycgKyB0aGlzLmlucHV0U2VjdGlvbk51bS52YWwoKSArICdfJyArIHRoaXMubGlua0NudCkudmFsKHRoaXMuZW5kWCk7XHJcbiAgICAgICAgICAgICAgICAkKCcjbG5rV2lkdGhfJyArIHRoaXMuaW5wdXRTZWN0aW9uTnVtLnZhbCgpICsgJ18nICsgdGhpcy5saW5rQ250KS52YWwodGhpcy5zZWxXaWR0aCk7XHJcbiAgICAgICAgICAgICAgICAkKCcjbG5rSGVpZ2h0XycgKyB0aGlzLmlucHV0U2VjdGlvbk51bS52YWwoKSArICdfJyArIHRoaXMubGlua0NudCkudmFsKHRoaXMuc2VsSGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0TGlzdExpbmsuYXBwZW5kKHJlc3VsdFN0cik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgY29vcmRHZW5lcmF0b3IuaW5pdCgpO1xyXG59KSh3aW5kb3csIHdpbmRvdy5qUXVlcnkpO1xyXG4iLCIoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgdmFyIGNvb3JkR2VuZXJhdG9yID0ge1xyXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRFbGVtZW50cygpO1xyXG4gICAgICAgICAgICB0aGlzLmJpbmRFdmVudHMoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldEVsZW1lbnRzOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGV4dEFyZWEgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYm9keScpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYmluZEV2ZW50czogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aGlzLnRleHRBcmVhWzBdLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0QXJlYU9uRnVuYygpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdGV4dEFyZWFPbkZ1bmMgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdib2R5Jyk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCQodGhpcykpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBjb29yZEdlbmVyYXRvci5pbml0KCk7XHJcbn0pKCk7Il19