"use strict";function dragElement(n,s,o,h,a,r){var l=0,d=0,c=0,u=0;function t(t){"inp-coordi"!==t.target.className&&"image-width"!==t.target.className&&"image-height"!==t.target.className&&"inp-section"!==t.target.className&&"btn btn_error"!==t.target.className&&"btn btn_linkCancel"!==t.target.className&&"btn btn_couponCancel"!==t.target.className&&"btn delete-image"!==t.target.className&&((t=t||window.event).preventDefault(),l=t.clientX,d=t.clientY,document.onmouseup=e,document.onmousemove=i)}function i(t){var i=window.innerWidth,e=window.innerHeight;(t=t||window.event).preventDefault(),c=l-t.clientX,u=d-t.clientY,l=t.clientX,d=t.clientY,null!==n?(n.style.left=100*l/i<10?"10%":90<100*l/i?"90%":100*l/i+"%",n.style.top=100*d/e<10?"10%":90<100*d/e?"90%":100*d/e+"%",o.style.width=100*l/i+"%",h.style.width=100*(i-l)/i+"%",a.style.height=100*d/e+"%",r.style.height=100*(e-d)/e+"%"):null!==s&&(s.style.left=100*(s.offsetLeft-c)/i+"%",s.style.top=100*(s.offsetTop-u)/e+"%")}function e(){document.onmouseup=null,document.onmousemove=null}null!==n?n.onmousedown=t:null!==s&&(s.onmousedown=t)}({init:function(){this.setElements(),this.bindEvents()},setElements:function(){this.textArea=document.getElementsByTagName("body")},bindEvents:function(){var t=this;this.textArea[0].addEventListener("click",function(){t.textAreaOnFunc()})},textAreaOnFunc:function(){console.log("body")}}).init(),dragElement(document.getElementById("btn-coordinate"),null,document.getElementById("left-side"),document.getElementById("right-side"),document.getElementById("left-side-top"),document.getElementById("left-side-bottom")),dragElement(null,document.getElementById("draggable"),null,null,null,null),function(e){({init:function(){this.setElements(),this.initLayout(),this.bindEvents()},setElements:function(){this.deviceArea=e(".device_area"),this.deleteImage=e(".delete-image"),this.btnLinkCancel=this.deviceArea.find(".btn_linkCancel"),this.btnCouponCancel=this.deviceArea.find(".btn_couponCancel"),this.btnError=this.deviceArea.find(".btn_error"),this.inputSectionNum=e("#section-num"),this.inputCoupon=e("#coupon"),this.inputLink=e("#link"),this.imgArea=e(".img_area"),this.imgSize=e(".image-size"),this.imgSizeWidth=this.imgSize.find(".image-width"),this.imgSizeHeight=this.imgSize.find(".image-height"),this.currentArea=this.imgArea.find(".current_area"),this.imgBox=this.imgArea.find(".img_box"),this.imgBoxCoupon=this.imgArea.find(".img_coupon"),this.imgBoxLink=this.imgArea.find(".img_link"),this.currentCoord=this.currentArea.find(".current_coord"),this.currentX=this.currentCoord.find(".pos_x"),this.currentY=this.currentCoord.find(".pos_y"),this.lineX=this.currentArea.find(".line_x"),this.lineY=this.currentArea.find(".line_y"),this.resultListCoupon=e(".result_lst_coupon"),this.resultListLink=e(".result_lst_link"),this.couponCnt=0,this.linkCnt=0,this.coordUnit="px"},initLayout:function(){this.currentArea.hide()},bindEvents:function(){this.imgArea.on("dragover dragenter dragleave drop",e.proxy(this.onDragEvents,this)),this.deleteImage.on("click",e.proxy(this.removeImage,this)),this.btnError.on("click",e.proxy(this.errorClickCancel,this)),this.btnLinkCancel.on("click",e.proxy(this.clickLinkCancel,this)),this.btnCouponCancel.on("click",e.proxy(this.clickCouponCancel,this))},onDragEvents:function(t){if("dragover"===t.type||"dragenter"==t.type)return this.imgArea.addClass("is_active"),!1;"dragleave"===t.type?this.imgArea.removeClass("is_active"):"drop"===t.type&&(""===this.inputSectionNum.val()?(t.preventDefault(),this.imgArea.removeClass("is_active"),alert("섹션번호를 입력해주세요")):(this.onDragleaveFunc(t),alert("오른쪽 영역 해당 섹션에 쿠폰개수와 링크개수가 입력되어있는지 확인해주세요 \n 영역 드래그 하시기 전에 그 부분을 입력해주셔야됩니다.")))},onDragleaveFunc:function(t){var i=new FileReader;this.file=t.originalEvent.dataTransfer.files[0],i.readAsDataURL(this.file),i.onload=e.proxy(this.createImage,this),t.preventDefault()},createImage:function(t){var i;this.file.type.match("image.*")?this.img||((i=new Image).src=t.target.result,this.img=this.imgBox.html(i).find("img"),this.img.on("load",e.proxy(this.onLoadImage,this))):alert("이미지 형식의 파일만 열어주세요.")},onLoadImage:function(){this.imgSizeWidth.val(this.img.width()+"px"),this.imgSizeHeight.val(this.img.height()+"px"),e("#secHeight"+this.inputSectionNum.val()).val(this.img.height()),this.imgArea.on("mousemove mouseenter mouseleave mousedown mouseup",e.proxy(this.coordEvents,this))},removeImage:function(){void 0!==this.img&&(this.imgArea.removeClass("is_active"),this.imgBoxLink.children(".drag_area").remove(),this.imgBoxCoupon.children(".drag_area").remove(),this.resultListCoupon.children().remove(),this.resultListLink.children().remove(),this.img.remove(),this.file=void 0,this.img=void 0,this.couponCnt=0,this.linkCnt=0,this.imgSizeWidth.val(null),this.imgSizeHeight.val(null),this.inputSectionNum.val(null),this.imgArea.off("mousemove mouseenter mouseleave mousedown mouseup"))},coordEvents:function(t){"mousemove"===t.type||"mouseenter"===t.type?this.showCurrentCoord(t):"mouseleave"===t.type?this.currentArea.hide():"mousedown"===t.type?this.initDragArea(t):"mouseup"===t.type&&this.drawSelectArea(t)},showCurrentCoord:function(t){this.imgOffsetX=this.img.offset().left.toFixed(0),this.imgOffsetY=this.img.offset().top.toFixed(0);var i=t.pageX-this.imgOffsetX,e=t.pageY-this.imgOffsetY;this.currentArea.show(),this.currentX.html(i+this.coordUnit),this.currentY.html(e+this.coordUnit),this.lineX.css("left",i),this.lineY.css("top",e)},initDragArea:function(t){var i;1===t.which&&(this.isDragged=!1,this.imgOffsetX=this.img.offset().left.toFixed(0),this.imgOffsetY=this.img.offset().top.toFixed(0),this.startX=t.pageX-this.imgOffsetX,this.startY=t.pageY-this.imgOffsetY,i=e('<div class="drag_area"></div>'),!0===this.inputCoupon.prop("checked")?(this.imgBoxCoupon.prepend(i),this.dragArea=this.imgBoxCoupon.children(".drag_area").first()):!0===this.inputLink.prop("checked")&&(this.imgBoxLink.prepend(i),this.dragArea=this.imgBoxLink.children(".drag_area").first()),this.imgArea.on("mousemove",e.proxy(this.drawDragging,this)))},drawDragging:function(t){this.isDragged=!0,this.imgOffsetX=this.img.offset().left.toFixed(0),this.imgOffsetY=this.img.offset().top.toFixed(0),this.dragX=t.pageX-this.imgOffsetX,this.dragY=t.pageY-this.imgOffsetY,this.selWidth=Math.abs(this.dragX-this.startX),this.selHeight=Math.abs(this.dragY-this.startY),this.endX=this.dragX<this.startX?this.startX-this.selWidth:this.startX,this.endY=this.dragY<this.startY?this.startY-this.selHeight:this.startY,this.dragArea.css({width:this.selWidth,height:this.selHeight,top:this.endY,left:this.endX})},drawSelectArea:function(t){var i;1===t.which&&(this.isDragged?!0===this.inputCoupon.prop("checked")?(i=++this.couponCnt,this.dragArea.css({background:"rgba(0,0,0,0.4)","line-height":this.selHeight+"px"}).html("쿠폰"+i),this.dragArea.attr("data-num",this.couponCnt),this.imgArea.off("mousemove",this.drawDragging),this.addCoordResult()):!0===this.inputLink.prop("checked")&&(this.dragArea.css({background:"rgba(0,0,0,0.4)","line-height":this.selHeight+"px"}).html("링크"+i),this.dragArea.attr("data-num",this.linkCnt),this.imgArea.off("mousemove",this.drawDragging),this.addCoordResult()):this.dragArea.remove())},clickCouponCancel:function(){for(var t=0;t<e(".drag_area").length;t++)void 0===e(".drag_area").eq(t).attr("data-num")&&e(".drag_area").eq(t).remove();this.dragArea&&this.couponCnt&&(this.imgBoxCoupon.find(".drag_area").eq(0).remove(),this.resultListCoupon.children("li").last().remove(),this.couponCnt--,this.couponCnt<0&&(this.couponCnt=0))},clickLinkCancel:function(){for(var t=0;t<e(".drag_area").length;t++)void 0===e(".drag_area").eq(t).attr("data-num")&&e(".drag_area").eq(t).remove();this.dragArea&&this.linkCnt&&(this.imgBoxLink.find(".drag_area").eq(0).remove(),this.resultListLink.children("li").last().remove(),this.linkCnt--,this.linkCnt<0&&(this.linkCnt=0))},errorClickCancel:function(){for(var t=0;t<e(".drag_area").length;t++)void 0===e(".drag_area").eq(t).attr("data-num")&&e(".drag_area").eq(t).remove()},addCoordResult:function(){var t;!0===this.inputCoupon.prop("checked")?(t='<li><span class="num">쿠폰'+this.couponCnt+'</span><input type="text" class="inp-coordi" data-num="'+this.selCnt+'" value="top:'+this.endY+this.coordUnit+";left:"+this.endX+this.coordUnit+";width:"+this.selWidth+this.coordUnit+";height:"+this.selHeight+this.coordUnit+';">',e("#couponTop_"+this.inputSectionNum.val()+"_"+this.couponCnt).val(this.endY),e("#couponLeft_"+this.inputSectionNum.val()+"_"+this.couponCnt).val(this.endX),e("#couponWidth_"+this.inputSectionNum.val()+"_"+this.couponCnt).val(this.selWidth),e("#couponHeight_"+this.inputSectionNum.val()+"_"+this.couponCnt).val(this.selHeight),this.resultListCoupon.append(t)):!0===this.inputLink.prop("checked")&&(t='<li><span class="num">링크'+this.linkCnt+'</span><input type="text" class="inp-coordi" data-num="'+this.selCnt+'" value="top:'+this.endY+this.coordUnit+";left:"+this.endX+this.coordUnit+";width:"+this.selWidth+this.coordUnit+";height:"+this.selHeight+this.coordUnit+';">',e("#lnkTop_"+this.inputSectionNum.val()+"_"+this.linkCnt).val(this.endY),e("#lnkLeft_"+this.inputSectionNum.val()+"_"+this.linkCnt).val(this.endX),e("#lnkWidth_"+this.inputSectionNum.val()+"_"+this.linkCnt).val(this.selWidth),e("#lnkHeight_"+this.inputSectionNum.val()+"_"+this.linkCnt).val(this.selHeight),this.resultListLink.append(t))}}).init()}((window,window.jQuery)),{init:function(){this.setElements(),this.bindEvents()},setElements:function(){this.textArea=document.getElementsByTagName("body")},bindEvents:function(){var t=this;this.textArea[0].addEventListener("click",function(){t.textAreaOnFunc()})},textAreaOnFunc:function(){console.log("body")}}.init();
//# sourceMappingURL=script.min.js.map